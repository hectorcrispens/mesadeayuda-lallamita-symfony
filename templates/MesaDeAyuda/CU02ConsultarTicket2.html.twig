{% extends 'layout/baseLayout.html.twig' %}

{% block header %}

    <link href="{{ asset('plugins/bootstrap/css/bootstrap.min.css') }}">

    <!-- JQuery DataTable Css -->
    <link href="{{ asset('css/jquery.dataTables.css') }}" rel="stylesheet">
    <link href="{{ asset('css/dataTables.bootstrap.min.css') }}" rel="stylesheet">
    <link href="{{ asset('css/colReorder.bootstrap.min.css') }}" rel="stylesheet">

    <!-- Bootstrap Material Datetime Picker Css -->
    <link href="{{ asset('plugins/bootstrap-material-datetimepicker/css/bootstrap-material-datetimepicker.css') }}" rel="stylesheet" />

    <!-- Wait Me Css -->
    <link href="{{ asset('plugins/waitme/waitMe.css') }}" rel="stylesheet" />

    <!-- Bootstrap Select Css -->
    <link href="{{ asset('plugins/bootstrap-select/css/bootstrap-select.css') }}" rel="stylesheet" />

    <script>
        function seleccionar(valor) {
            var label = document.getElementById('line');
            label.className+=' focused';
            var inp = document.getElementById('imput_selected');
            inp.value = valor;




        }
        function sacar() {

            $('#inp1').removeClass('focused');
            $('#inp2').removeClass('focused');
            $('#inp3').removeClass('focused');
            $('#inp4').removeClass('focused');
            $('#inp5').removeClass('focused');
            $('#inp6').removeClass('focused');
            $('#inp7').removeClass('focused');
        }
    </script>

{% endblock %}

{% block menu %}
   {% include 'MesaDeAyuda/menu/CU02menu01.html.twig' %}
{% endblock %}


{% block content %}

<section class="content">
    <div class="container-fluid">
        <div class="block-header">
            <h2>CONSULTA DE TICKET</h2>
        </div>

        <!-- Hover Zoom Effect -->
        <div class="block-header">
            <h2>Cantidad de elementos encontrados</h2>
        </div>
        <div class="row">
            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <div class="info-box-4 hover-zoom-effect">
                    <div class="icon">
                        <i class="material-icons col-pink">collections_bookmark</i>
                    </div>
                    <div class="content">
                        <div class="text">TICKETS</div>
                        <div class="number">{{ stat[0] }}</div>
                    </div>
                </div>

            </div>
            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <div class="info-box-4 hover-zoom-effect">
                    <div class="icon">
                        <i class="material-icons col-blue">person</i>
                    </div>
                    <div class="content">
                        <div class="text">LEGAJOS</div>
                        <div class="number">{{ stat[1] }}</div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <div class="info-box-4 hover-zoom-effect">
                    <div class="icon">
                        <i class="material-icons col-green">check_circle</i>
                    </div>
                    <div class="content">
                        <div class="text">A LA ESPERA OK</div>
                        <div class="number">{{ stat[2] }}</div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                <div class="info-box-4 hover-zoom-effect">
                    <div class="icon">

                        <i class="material-icons col-cyan">lock</i>

                    </div>
                    <div class="content">
                        <div class="text">CERRADOS</div>
                        <div class="number">{{ stat[3] }}</div>

                    </div>
                </div>
            </div>
        </div>
        <!-- #END# Hover Zoom Effect -->

        <!-- Panel de Funciones -->
        <div class="row clearfix">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="card">
                    <div class="header">
                        <h2>
                            PANEL DE FUNCIONES
                            <small>Elija los criterios por los cuales será organizada la información</small>
                        </h2>
                        <ul class="header-dropdown m-r--5">
                            <li class="dropdown">
                                <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                                    <i class="material-icons">more_vert</i>
                                </a>
                                <ul class="dropdown-menu pull-right">
                                    <li><a href="javascript:void(0);">Action</a></li>
                                    <li><a href="javascript:void(0);">Another action</a></li>
                                    <li><a href="javascript:void(0);">Something else here</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                    <div class="body">

                        <button class="btn bg-cyan waves-effect m-b-15" type="button" data-toggle="collapse" data-target="#collapseExample" aria-expanded="false"
                                aria-controls="collapseExample">
                            <i class="material-icons">build</i>
                            <span>CONFIGURAR REPORTE</span>
                        </button>
                        <button class="btn bg-deep-orange waves-effect m-b-15" type="button" data-toggle="collapse" data-target="#collapseExample2" aria-expanded="false"
                                aria-controls="collapseExample">
                            <i class="material-icons">collections_bookmark</i>
                            <span>SELECCIONAR TICKET</span>
                        </button>
                        <div class="collapse" id="collapseExample">

                            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">

                                <div class="demo-masked-input">
                                    <select class="form-control show-tick" title="Orden">

                                        <option>ascendente</option>
                                        <option>descendete</option>

                                    </select>

                                </div>

                            </div>


                            <div class="button-demo">
                               <a href="{{ url('CU20AgruparPorTicket') }}"> <button type="button" class="btn btn-default waves-effect">POR TICKET</button></a>
                                <a href="{{ url('CU21AgruparPorLegajo') }}"><button type="button" class="btn btn-primary waves-effect" >POR LEGAJO</button></a>
                                    <a href="{{ url('CU22AgruparPorEstado') }}"><button type="button" class="btn btn-success waves-effect">POR ESTADO</button></a>
                                        <a href="{{ url('CU23AgruparPorUltimoGrupo') }}"><button type="button" class="btn btn-warning waves-effect">POR GRUPO DE RESOLUCIÓN</button></a>
                                            <a href="{{ url('CU24AgruparPorClasificacionTicket') }}"><button type="button" class="btn btn-danger waves-effect" >CLASIFICACIÓN</button></a>
                            </div>
                        </div>
                        <div class="collapse" id="collapseExample2">
                            <div class="row clearfix">
                                <div class="col-md-2">
                            <div class="button-demo">
                                <button type="button" class="btn btn-default waves-effect" onclick="verDetalle()">Seleccionar</button>
                                <script>
                                    function verDetalle() {
                                        var inp = document.getElementById("imput_selected");
                                        var valor = inp.value;
                                        location.href="CU02ConsultarTicket3/" + valor;


                                    }
                                </script>

                            </div>
                                </div>
                            <div class="col-sm-6">
                                <div class="form-group form-float">
                                    <div id="line" class="form-line">
                                        <input type="text" id="imput_selected" class="form-control">
                                        <label class="form-label">Número de ticket</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- #END# Panel de funciones -->

        <!-- Panel con salida de datos -->
        <div class="row clearfix">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="card">
                    <div class="header">
                        <h2>
                            CRITERIOS SELECCIONADOS EN LA BÚSQUEDA
                        </h2>
                        <ul class="header-dropdown m-r--5">
                            <li class="dropdown">
                                <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown"
                                   role="button" aria-haspopup="true" aria-expanded="false">
                                    <i class="material-icons">more_vert</i>
                                </a>
                                <ul class="dropdown-menu pull-right">
                                    <li><a href="javascript:void(0);">Action</a></li>
                                    <li><a href="javascript:void(0);">Another action</a></li>
                                    <li><a href="javascript:void(0);">Something else here</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                    <div class="body">
                        <form>
                            <!-- NUMERO DE TICKET Y NUMERO DE LEGAJO -->
                            <div class="row clearfix">
                                <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                    <div class="form-group form-float">
                                        <div id="inp1" class="form-line" >
                                            <label class="form-label" style=" top: -10px; font-size: 12px;">Número de Ticket</label>
                                            <input type="text" class="form-control" readonly value="{{ requestflash.get(0) }}" disabled>

                                        </div>
                                    </div>
                                </div>

                                <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                    <div class="form-group form-float">
                                        <div id="inp2" class="form-line">
                                            <label class="form-label" style=" top: -10px; font-size: 12px;">Número de Legajo</label>
                                            <input type="text" class="form-control" readonly value="{{ requestflash.get(1) }}" disabled>


                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                    <div class="form-group form-float">
                                        <div id="inp7" class="form-line">
                                            <label class="form-label" style=" top: -10px; font-size: 12px;">Estado</label>
                                            <input type="text" class="form-control" readonly value="{{ requestflash.get(2) }}" disabled>

                                        </div>
                                    </div>
                                </div>
                            </div>


                            <!-- CLASIFICACION DE TICKET-->
                            <div class="row clearfix">
                                <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                    <div class="form-group form-float">
                                        <div id="inp3" class="form-line">
                                            <label class="form-label" style=" top: -10px; font-size: 12px;">Clasificación de Ticket</label>
                                            <input type="text" class="form-control" disabled readonly value="{{ requestflash.get(3) }}">

                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                    <div class="form-group form-float">
                                        <div id="inp4" class="form-line">
                                            <label class="form-label" style=" top: -10px; font-size: 12px;">Grupo de Resolución</label>
                                            <input type="text" class="form-control" disabled readonly value="{{ requestflash.get(4) }}">

                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                    <div class="form-group form-float">
                                        <div id="inp5" class="form-line">
                                            <div class="demo-masked-input">
                                                <label class="form-label" style=" top: -10px; font-size: 12px;">Fecha de Creación</label>
                                                <input type="text" class="form-control" disabled readonly value="{{ requestflash.get(5) }}">

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>





                            <!-- FECHA DE CREACION Y ULTIMO CAMBIO -->
                            <div class="row clearfix">



                                <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
                                    <div class="form-group">
                                        <div id="inp6" class="form-line">

                                            <label class="form-label" style=" top: -10px; font-size: 12px;">Fecha de último cambio de estado</label>
                                            <input type="text" class="form-control" readonly value="{{ requestflash.get(6) }}" disabled>


                                        </div>
                                    </div>
                                </div>






                            </div>






                        </form>

                    </div>
                </div>
            </div>


        </div>
        <!-- #END# panel con salida de datos -->

        <!-- Basic Table -->
        <div class="row clearfix">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                <div class="card">
                    <div class="header">
                        <h2>
                            LISTADO DE TICKETS
                            <small>Todos los tickets solicitados por los criterios de busqueda</small>
                        </h2>
                        <ul class="header-dropdown m-r--5">
                            <li class="dropdown">
                                <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                                    <i class="material-icons">more_vert</i>
                                </a>
                                <ul class="dropdown-menu pull-right">
                                    <li><a href="javascript:void(0);">Action</a></li>
                                    <li><a href="javascript:void(0);">Another action</a></li>
                                    <li><a href="javascript:void(0);">Something else here</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>



                    <div class="body table-responsive">
                        <table id="tabla" class="table table-striped table-bordered">
                            <thead>
                            <tr>
                                <th>ticket</th>
                                <th>legajo</th>
                                <th>Fecha Apertura</th>
                                <th>Operador que abrió el ticket</th>
                                <th>Clasificación</th>
                                <th>Estado actual</th>
                                <th>Último cambio</th>
                                <th>Grupo de Resolución</th>

                            </tr>
                            </thead>
                            <tbody>
                            {% for resultDTO in resultado %}
                            <tr onclick="seleccionar({{ resultDTO.id  }})">
                                <td >{{ resultDTO.id  }}</td>
                                <td>{{ resultDTO.legajo }}</td>
                                <td>{{ resultDTO.FechaApertura }}</td>
                                <td>{{ resultDTO.usuario }}</td>
                                <td>{{ resultDTO.clasificacion }}</td>
                                <td>{{ resultDTO.estado }}</td>
                                <td>{{ resultDTO.FechaUltimoCambio }}</td>
                                <td>{{ resultDTO.GrupoResolucion }}</td>

                            </tr>
                            {% endfor %}



                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <!-- #END# Basic Table -->








    </div>
</section>

{% endblock %}



{% block footer %}


<!-- Select Plugin Js -->
<script src="{{ asset('plugins/bootstrap-select/js/bootstrap-select.js') }}"></script>

<!-- Slimscroll Plugin Js -->
<script src="{{ asset('plugins/jquery-slimscroll/jquery.slimscroll.js') }}"></script>

<!-- Autosize Plugin Js -->
<script src="{{ asset('plugins/autosize/autosize.js') }}"></script>

<!-- Moment Plugin Js -->
<script src="{{ asset('plugins/momentjs/moment.js') }}"></script>

<!-- Bootstrap Material Datetime Picker Plugin Js -->
<script src="{{ asset('plugins/bootstrap-material-datetimepicker/js/bootstrap-material-datetimepicker.js') }}"></script>

<script src="{{ asset('   js/pages/forms/basic-form-elements.js') }}"></script>


<!-- tables -->
<!-- Jquery DataTable Plugin Js -->
<script src="{{ asset('plugins/datatables/jquery.dataTables.js') }}"></script>


<script>
    $(document).ready(function() {
        $('#tabla').DataTable({"language": {
            "search": "Buscar:",
            "zeroRecords": "No se encontraron Resultados",
            "infoFiltered": " - filtrado sobre _MAX_ entradas",
            "infoEmpty": "Ninguna Entrada para mostrar",
            "paginate": {
                "first":      "Primero",
                "last":       "Último",
                "next":       "Próximo",
                "previous":   "Previo"
            },"lengthMenu":     "Mostrar _MENU_ entradas",
            "info":           "Mostrando _START_ de _TOTAL_ entradas",
            colReorder: true
        }
        });
    } );
</script>
{% endblock %}